# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
st_bbox(GHSL_sf)
st_bbox(CA_county_shp)
# subset data down to California and transportation pollution
GHSL_CA <- GHSL_raw %>%
filter(CTR_MN_ISO == "USA") %>%
filter(GCPNT_LAT > 33 & GCPNT_LAT < 42) %>%
filter(GCPNT_LON > -124 & GCPNT_LON < -114) %>%
select(GCPNT_LAT, GCPNT_LON, UC_NM_MN, P15, E_EC2E_T15, E_EPM2_T15)
colnames(GHSL_CA) <- c("lat", "lon", "city", "pop", "CO2", "PM25")
GHSL_sf <- GHSL_CA %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 4326) %>%
sf::st_transform(crs = 4326)
GHSL_spdf <- SpatialPointsDataFrame(coords = GHSL_CA[,c("lat", "lon")],
data = GHSL_CA,
proj4string = CRS("+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"))
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25), data = GHSL_sf) +
# geom_point(aes(x = lon, y = lat, color = CO2, size = pop),
# data = GHSL_CA) +
# geom_label(aes(x = lon, y = lat, label = city), data = GHSL_CA) +
# stat_sf_coordinates(aes(color = CO2),
# data = GHSL_CA) +
# scale_fill_gradient(name = "Elevation of Highest\nPeak (feet)", low = "darkgreen", high = "red") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25), data = GHSL_sf, size = pop) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25, size = pop), data = GHSL_sf) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25, size = pop), data = GHSL_sf) +
scale_color_gradient(low = "green", high = "red") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(low = "green", high = "red") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(low = "green", high = "red") +
guides(size = FALSE) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(low = "green", high = "red") +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
library("scales")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "carbon dioxide",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "blue", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "30 Day Map Challenge, Day 21: Elevation",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "carbon dioxide",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "total emission of CO2 from the transport sector, using non-short-cycle-organic fuels in 2015",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "carbon dioxide",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 10),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "total emission of CO2 from the transport sector\nusing non-short-cycle-organic fuels in 2015",
caption = "Year 2015",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "carbon dioxide",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 10),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide",
subtitle = "total emission of CO2 from the transport sector\nusing non-short-cycle-organic fuels in 2015",
caption = "",
x = "", y = "")
CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "carbon dioxide",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 10),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Particulate Matter (PM 2.5)",
subtitle = "total emission of particulate matter from the transport sector\nusing non-short-cycle-organic fuels in 2015",
caption = "",
x = "", y = "")
plot_PM25 <- CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "particulate matter\n(tonnes per year)",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 10),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Particulate Matter (PM 2.5)",
subtitle = "total emission of particulate matter from the transport sector\nusing non-short-cycle-organic fuels in 2015",
caption = "",
x = "", y = "")
plot_PM25
library("patchwork")
plot_CO2 <- CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = CO2, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "carbon dioxide\n(tonnes per year)",
low = "green", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 10),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Carbon Dioxide (CO2)",
subtitle = "total emission of CO2 from the transport sector\nusing non-short-cycle-organic fuels in 2015",
caption = "",
x = "", y = "")
plot_CO2 + plot_PM25 +
plot_annotation(title = "30 Day Map Challenge, Day 23: GHSL",
caption = "Data Source: GHSL")
plot_PM25 <- CA_county_shp %>%
ggplot() +
geom_sf(color = "gray50", fill = "white") +
geom_sf(aes(color = PM25, size = pop), data = GHSL_sf) +
scale_color_gradient(name = "particulate matter\n(tonnes per year)",
low = "black", high = "red",
labels = comma) +
guides(size = "none") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = c(0.80, 0.75),
# legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 10),
plot.title = element_text(color = "black", hjust = 0.5, size = 20)) +
labs(title = "Particulate Matter (PM 2.5)",
subtitle = "total emission of particulate matter from the transport sector\nusing non-short-cycle-organic fuels in 2015",
caption = "",
x = "", y = "")
plot_PM25
knitr::opts_chunk$set(echo = TRUE)
library("sf")
library("tidyverse")
# load shape file
countries_shp <- st_read("/ne_50m_admin_0_countries/ne_50m_admin_0_countries.shp")
setwd("~/GitHub/30DayMapChallenge")
# load shape file
countries_shp <- st_read("/ne_50m_admin_0_countries/ne_50m_admin_0_countries.shp")
# load shape file
countries_shp <- st_read("ne_50m_admin_0_countries/ne_50m_admin_0_countries.shp")
# load data file
LGBT_df <- readxl::read_xlsx("GAI.xlsx")
# load data file
LGBT_df <- readr::read_csv("GAI.csv")
View(LGBT_df)
table(LGBT_df$year)
str(LGBT_df)
LGBT_2003 <- LGBT_df %>% filter(year == 2003)
summary(LGBT_df$gai)
colnames(countries_shp)
View(countries_shp)
L_df <- countries_shp %>% select(SU_A3, NAME )
?inner_join
semi_join(L_df, LGBT_df, by = c("NAME" = "country"))
anti_join(L_df, LGBT_df, by = c("NAME" = "country"))
Q <- anti_join(L_df, LGBT_df, by = c("NAME" = "country"))
Q$NAME
W <- anti_join(LGBT_df, L_df, by = c("country" = "NAME"))
W$country
sort(W$country)
unique(sort(W$country))
# load shape file
countries_shp <- st_read("ne_50m_admin_0_countries/ne_50m_admin_0_countries.shp")
# load data file
LGBT_df <- readr::read_csv("GAI.csv")
W <- anti_join(LGBT_df, L_df, by = c("country" = "NAME"))
unique(sort(W$country))
# load data file
LGBT_df <- readr::read_csv("GAI.csv")
Q <- anti_join(L_df, LGBT_df, by = c("NAME" = "country"))
unique(sort(Q$NAME))
# load shape file
countries_shp <- st_read("ne_50m_admin_0_countries/ne_50m_admin_0_countries.shp")
# load data file
LGBT_df <- readr::read_csv("GAI.csv")
colnames(LGBT_df)
LGBT_2003 <- LGBT_df %>% filter(year == 2003)
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by =c("NAME" = "country")) %>%
ggplot() +
geom_sf(fill = gai)
Q <- countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003)
)
Q <- countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country"))
colnames(Q)
LGBT_2003 <- LGBT_df %>% filter(year == 2003)
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai))
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient(low = "999247", mid = "white", high = "8C4799")
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient2(low = "999247", mid = "white", high = "8C4799")
?scale_fill_gradient2
?scale_fill_gradient
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient2(low = "#999247", mid = "white", high = "#8C4799")
summary(LGBT_df$gai)
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient2(low = "#999247", mid = "white", high = "#8C4799",
limits = c(1.6, 8.9))
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient(low = "#999247", high = "#8C4799",
limits = c(1.6, 8.9))
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient(low = "#999247", high = "#8C4799",
limits = c(1.6, 8.9)) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "bottom",
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#999247", hjust = 0.5, size = 15),
plot.title = element_text(color = "#8C4799", hjust = 0.5, size = 20)) +
labs(title = "Global Acceptance Index of LGBT (2003)",
subtitle = "30 Day Map Challenge, Day 24: Historical Map",
caption = "Data Source: Williams Institute at UCLA",
x = "", y = "")
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient(name = "Global Acceptance Index",
low = "#999247", high = "#8C4799",
limits = c(1.6, 8.9)) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "bottom",
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#999247", hjust = 0.5, size = 15),
plot.title = element_text(color = "#8C4799", hjust = 0.5, size = 20)) +
labs(title = "Global Acceptance Index of LGBT (2003)",
subtitle = "30 Day Map Challenge, Day 24: Historical Map",
caption = "Data Source: Williams Institute at UCLA",
x = "", y = "")
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient(name = "Global Acceptance Index",
low = "#999247", high = "#8C4799",
limits = c(1.6, 8.9)) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "bottom",
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#999247", hjust = 0.5, size = 15),
plot.title = element_text(color = "#8C4799", hjust = 0.5, size = 20)) +
labs(title = "Global Acceptance Index of LGBT (2003)",
subtitle = "30 Day Map Challenge, Day 24: Historical Map",
caption = "Data Source: Williams Institute at UCLA",
x = "", y = "")
countries_shp %>%
left_join(LGBT_df %>% filter(year == 2003),
by = c("NAME" = "country")) %>%
ggplot() +
geom_sf(aes(fill = gai)) +
scale_fill_gradient(name = "Global Acceptance Index",
low = "#999247", high = "#8C4799",
breaks = c(2,4,6,8),
limits = c(1.6, 8.9)) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "bottom",
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#999247", hjust = 0.5, size = 15),
plot.title = element_text(color = "#8C4799", hjust = 0.5, size = 20)) +
labs(title = "Global Acceptance Index of LGBT (2003)",
subtitle = "30 Day Map Challenge, Day 24: Historical Map",
caption = "Data Source: Williams Institute at UCLA",
x = "", y = "")
