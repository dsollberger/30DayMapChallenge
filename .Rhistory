theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 30)) +
scale_fill_gradient(low = "gray", high = "green", name = "ARVI") +
labs(title = "ARVI",
subtitle = "30 Day Map Challenge Day 10: Raster",
caption = "USGS LandSat8 Data",
x = "", y = "")
plot_ARVI
C1 <- 6
C2 <- 7.5
L  <- 1
EVI <- 2.5*((NIR - RED + BLUE) / (NIR + C1*RED - C2*BLUE + L))
EVI_df <- EVI %>%
projectRaster(crs = "+proj=longlat +datum=WGS84") %>%
as("SpatialPixelsDataFrame") %>%
as.data.frame()
Merced_EVI_df <- EVI_df %>%
filter(x > -120.55) %>%
filter(x < -120.40) %>%
filter(y > 37.27) %>%
filter(y < 37.38)
summary(Merced_EVI_df$layer)
plot_EVI <- Merced_EVI_df %>%
ggplot() +
geom_tile(aes(x = x, y = y, fill = layer)) +
geom_sf(data = merced_road_shp) +
xlim(-120.55, -120.40) +
ylim(37.27, 37.38) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 30)) +
scale_fill_gradient(low = "gray", high = "green", name = "EVI") +
labs(title = "EVI",
subtitle = "30 Day Map Challenge Day 10: Raster",
caption = "USGS LandSat8 Data",
x = "", y = "")
plot_EVI
C1 <- 6
C2 <- 7.5
L  <- 1
EVI <- 2.5*((NIR - RED) / (NIR + C1*RED - C2*BLUE + L))
EVI_df <- EVI %>%
projectRaster(crs = "+proj=longlat +datum=WGS84") %>%
as("SpatialPixelsDataFrame") %>%
as.data.frame()
Merced_EVI_df <- EVI_df %>%
filter(x > -120.55) %>%
filter(x < -120.40) %>%
filter(y > 37.27) %>%
filter(y < 37.38)
summary(Merced_EVI_df$layer)
plot_EVI <- Merced_EVI_df %>%
ggplot() +
geom_tile(aes(x = x, y = y, fill = layer)) +
geom_sf(data = merced_road_shp) +
xlim(-120.55, -120.40) +
ylim(37.27, 37.38) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 30)) +
scale_fill_gradient(low = "gray", high = "green", name = "EVI") +
labs(title = "EVI",
subtitle = "30 Day Map Challenge Day 10: Raster",
caption = "USGS LandSat8 Data",
x = "", y = "")
GREEN <- raster("Merced20211008/LC08_CU_002009_20211008_20211022_02_TOA_B3.tif")
GCI <- NIR / GREEN + 1
GCI_df <- GCI %>%
projectRaster(crs = "+proj=longlat +datum=WGS84") %>%
as("SpatialPixelsDataFrame") %>%
as.data.frame()
Merced_GCI_df <- GCI_df %>%
filter(x > -120.55) %>%
filter(x < -120.40) %>%
filter(y > 37.27) %>%
filter(y < 37.38)
summary(Merced_GCI_df$layer)
plot_GCI <- Merced_GCI_df %>%
ggplot() +
geom_tile(aes(x = x, y = y, fill = layer)) +
geom_sf(data = merced_road_shp) +
xlim(-120.55, -120.40) +
ylim(37.27, 37.38) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 30)) +
scale_fill_gradient(low = "gray", high = "green", name = "GCI") +
labs(title = "GCI",
subtitle = "30 Day Map Challenge Day 10: Raster",
caption = "USGS LandSat8 Data",
x = "", y = "")
plot_GCI
SIPI <- (NIR - BLUE) / (NIR - RED)
SIPI_df <- SIPI %>%
projectRaster(crs = "+proj=longlat +datum=WGS84") %>%
as("SpatialPixelsDataFrame") %>%
as.data.frame()
Merced_SIPI_df <- SIPI_df %>%
filter(x > -120.55) %>%
filter(x < -120.40) %>%
filter(y > 37.27) %>%
filter(y < 37.38)
summary(Merced_SIPI_df$layer)
plot_SIPI <- Merced_SIPI_df %>%
ggplot() +
geom_tile(aes(x = x, y = y, fill = layer)) +
geom_sf(data = merced_road_shp) +
xlim(-120.55, -120.40) +
ylim(37.27, 37.38) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 30)) +
scale_fill_gradient(low = "gray", high = "green", name = "SIPI") +
labs(title = "SIPI",
subtitle = "30 Day Map Challenge Day 10: Raster",
caption = "USGS LandSat8 Data",
x = "", y = "")
plot_SIPI
SWIR <- raster("Merced20211008/LC08_CU_002009_20211008_20211022_02_TOA_B6.tif")
NBR <- (NIR - SWIR) / (NIR + SWIR)
NBR_df <- NBR %>%
projectRaster(crs = "+proj=longlat +datum=WGS84") %>%
as("SpatialPixelsDataFrame") %>%
as.data.frame()
Merced_NBR_df <- NBR_df %>%
filter(x > -120.55) %>%
filter(x < -120.40) %>%
filter(y > 37.27) %>%
filter(y < 37.38)
summary(Merced_NBR_df$layer)
plot_NBR <- Merced_NBR_df %>%
ggplot() +
geom_tile(aes(x = x, y = y, fill = layer)) +
geom_sf(data = merced_road_shp) +
xlim(-120.55, -120.40) +
ylim(37.27, 37.38) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "black", hjust = 0.5, size = 15),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 30)) +
scale_fill_gradient(low = "gray", high = "green", name = "NBR") +
labs(title = "NBR",
subtitle = "30 Day Map Challenge Day 10: Raster",
caption = "USGS LandSat8 Data",
x = "", y = "")
plot_NBR
knitr::opts_chunk$set(echo = TRUE)
library("sf") #handle shape files
library("tidyverse")
# load shape file
CA_county_shp <- st_read("CA_Counties/CA_Counties_TIGER2016.shp")
# load Census data
CA_county_data_raw <- read_csv("cc-est2019-agesex-06")
# load Census data
CA_county_data_raw <- read_csv("cc-est2019-agesex-06.csv")
# load shape file
CA_county_shp <- st_read("CA_Counties/CA_Counties_TIGER2016.shp")
# load Census data
CA_county_data_raw <- read_csv("cc-est2019-agesex-06.csv")
# load shape file
CA_county_shp <- st_read("CA_Counties/CA_Counties_TIGER2016.shp")
# load Census data
CA_county_data_raw <- read_csv("cc-est2019-agesex-06.csv")
View(CA_county_data_raw)
gender_df <- CA_county_data_raw %>%
filter(Year == 12)
gender_df <- CA_county_data_raw %>%
filter(YEAR == 12)
View(gender_df)
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12)
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE)
View(CA_county_shp)
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE)
CA_county_shp <- CA_county_shp %>%
left_join(gender_df, by = c("NAMELSAD", "CTYNAME"))
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE)
CA_county_shp <- CA_county_shp %>%
left_join(gender_df, by = c("NAMELSAD" = "CTYNAME"))
CA_county_shp %>%
ggplot() +
geom_sf() +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_gradient(low = "red", high = "green", name = "NDVI") +
labs(title = "30 Day Map Challenge",
subtitle = "Day 9: Monochrome",
caption = "Data Source: data.ca.gov\n
\'roughsf\' R package")
CA_county_shp %>%
ggplot() +
geom_sf() +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_gradient(low = "red", high = "green", name = "NDVI") +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
CA_county_shp %>%
ggplot() +
geom_sf(fill = prop_male) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_gradient(low = "gray", high = "green", name = "proportion male") +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = prop_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_gradient(low = "gray", high = "green", name = "proportion male") +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE,
majority_male = prop_male > 50)
CA_county_shp <- CA_county_shp %>%
left_join(gender_df, by = c("NAMELSAD" = "CTYNAME"))
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_gradient(low = "gray", high = "green", name = "proportion male") +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
# scale_fill_gradient(low = "gray", high = "green", name = "proportion male") +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE,
majority_male = ifelse(prop_male > 50,
"more men", "more women")
CA_county_shp <- CA_county_shp %>%
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE,
majority_male = ifelse(prop_male > 50,
"more men", "more women"))
CA_county_shp <- CA_county_shp %>%
left_join(gender_df, by = c("NAMELSAD" = "CTYNAME"))
cbbPalette <- c("#CC79A7", "#E69F00")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
gender_df <- CA_county_data_raw %>%
select(CTYNAME, YEAR, POPESTIMATE, POPEST_MALE) %>%
filter(YEAR == 12) %>%
mutate(prop_male = 100*POPEST_MALE / POPESTIMATE,
majority_male = ifelse(prop_male > 50,
"more men", "more women"))
CA_county_shp <- CA_county_shp %>%
left_join(gender_df, by = c("NAMELSAD" = "CTYNAME"))
cbbPalette <- c("#CC79A7", "#E69F00")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "darkgreen", hjust = 0.5, size = 10),
plot.title = element_text(color = "darkgreen", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 10),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 15)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 30)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Proportion of Male Populations",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(legend.position = c(-118, 41),
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(legend.position = c(0.87, 0.25),
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(legend.position = c(0.87, 0.75),
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
cbbPalette <- c("#E69F00", "#CC79A7")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(legend.position = c(0.75, 0.75),
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
CA_county_shp %>%
ggplot() +
geom_sf(aes(fill = majority_male)) +
theme(legend.position = c(0.75, 0.75),
legend.title = element_blank(),
panel.background = element_blank(),
panel.grid.minor = element_blank(),
plot.subtitle = element_text(color = "#E69F00", hjust = 0.5, size = 15),
plot.title = element_text(color = "#CC79A7", hjust = 0.5, size = 20)) +
scale_fill_manual(values=cbbPalette) +
labs(title = "Gender Proportions",
subtitle = "30 Day Map Challenge, Day 11: Population",
caption = "Data Source: US Census")
