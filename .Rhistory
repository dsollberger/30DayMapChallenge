knitr::opts_chunk$set(echo = TRUE)
library("sf") #handle shape files
library("tmap") #display static maps
# load shape file
CA_county_shp <- st_read("CA_Counties/CA_Counties_TIGER2016.shp")
View(CA_county_shp)
# print map
tm_shape(CA_county_shp) +
tm_lines("gray50") +
tm_layout(main.title = "30 Day Map Challenge (Day 2: Lines)")
?tm_polygons
# print map
tm_shape(CA_county_shp) +
tm_polygons() +
tm_layout(main.title = "30 Day Map Challenge (Day 2: Lines)")
# print map
tm_shape(CA_county_shp) +
tm_polygons("MAP_COLORS") +
tm_layout(main.title = "30 Day Map Challenge (Day 3: Polygons)")
library("tidyverse")
CA_county_shp %>%
ggplot() +
geom_sf()
CA_county_shp %>%
ggplot() +
geom_sf() +
labs(title = "30 Day Map Challenge")
CA_county_shp %>%
ggplot() +
geom_sf() +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons")
CA_county_shp %>%
ggplot() +
geom_sf() +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
Merced_county_shp <- CA_county_shp %>% filter(NAME == "Merced")
?geom_sf
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, color = "red") +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
geom_sf_label(data = Merced_county_shp, aes(label = NAME)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
geom_sf_label(data = Merced_county_shp,
aes(label = NAME),
nudge_x = -1) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
geom_sf_label(data = Merced_county_shp,
aes(label = NAME),
nudge_x = -5) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
library("ggrepel")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
geom_label_repel(data = Merced_county_shp,
aes(label = NAME)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
Merced_county_shp <- CA_county_shp %>% filter(NAME == "Merced")
# https://en.wikipedia.org/wiki/Merced_County,_California
Merced_lat <- -120.71
Merced_long <- 37.19
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
geom_label_repel(data = Merced_county_shp,
aes(x = Merced_lat, y = Merced_long,
label = NAME)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
# geom_label_repel(data = Merced_county_shp,
#               aes(x = Merced_lat, y = Merced_long,
#                   label = NAME)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
CA_county_shp %>%
ggplot() +
geom_sf() +
geom_sf(data = Merced_county_shp, fill = "green") +
# geom_label_repel(data = Merced_county_shp,
#               aes(x = Merced_lat, y = Merced_long,
#                   label = NAME)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 3: Polygons",
caption = "Data Source: data.ca.gov")
knitr::opts_chunk$set(echo = TRUE)
library("sf") #handle shape files
library("tidyverse")
# load shape file
USA_hex_shp <- st_read("us_states_hexgrid/us_states_hexgrid.shp")
View(USA_hex_shp)
USA_hex_shp %>%
ggplot() +
geom_sf() +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: data.ca.gov")
library("rgeos") #for centroids
?gCentroid
str(USA_hex_shp)
# Calculate the centroid of each hexagon to add the label:
centers <- data.frame(
gCentroid(USA_hex_shp$geometry, byid=TRUE), id=USA_hex_shp$iso3166_2))
# Calculate the centroid of each hexagon to add the label:
centers <- data.frame(
gCentroid(USA_hex_shp$geometry, byid=TRUE), id=USA_hex_shp$iso3166_2)
?st_coordinate
?st_coordinates
?st_centroid
# Calculate the centroid of each hexagon to add the label:
centers <- data.frame(
st_centroid(USA_hex_shp$geometry), id=USA_hex_shp$iso3166_2)
View(centers)
View(centers)
?geom_text
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_text(data = centers, label = id) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
?st_centroid
?geom_sf_text
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = centers, label = id) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = centers, aes(label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = st_centroid(USA_hex_shp$geometry), aes(label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = st_centroid(USA_hex_shp$geometry), aes(label = USA_hex_shp$id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = st_centroid(USA_hex_shp$geometry)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
st_coordinates(st_centroid(USA_hex_shp$geometry))
# Calculate the centroid of each hexagon to add the label
# https://stackoverflow.com/questions/49343958/do-the-values-returned-by-rgeosgcentroid-and-sfst-centroid-differ
centers <- data.frame(
st_coordinates(st_centroid(USA_hex_shp$geometry)),
id=USA_hex_shp$iso3166_2)
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = centers, aes(x = x, y = y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
View(centers)
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_sf_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign")
USA_hex_shp %>%
ggplot() +
geom_sf() +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "")
# load demographics file
HRC_LGBT_housing <- readxl::read_xlsx("HRC_-_LGBT_housing.xlsx")
# merge data
USA_HRC_LGBT_housing <- USA_hex_shp %>%
left_join(by = "id")
# merge data
USA_HRC_LGBT_housing <- USA_hex_shp %>%
left_join(HRC_LGBT_housing, by = "id")
# merge data
USA_HRC_LGBT_housing <- USA_hex_shp %>%
left_join(HRC_LGBT_housing, by = c("iso3166_2", "id"))
View(HRC_LGBT_housing)
?left_join
# merge data
USA_HRC_LGBT_housing <- USA_hex_shp %>%
left_join(HRC_LGBT_housing, by = c("iso3166_2" = "id"))
View(USA_HRC_LGBT_housing)
USA_hex_shp %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_label(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "")
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_label(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "")
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_label(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme(legend.position = "bottom")
# load shape file
USA_hex_shp <- st_read("us_states_hexgrid/us_states_hexgrid.shp")
# load demographics file
HRC_LGBT_housing <- readxl::read_xlsx("HRC_-_LGBT_housing.xlsx")
# merge data
USA_HRC_LGBT_housing <- USA_hex_shp %>%
left_join(HRC_LGBT_housing, by = c("iso3166_2" = "id"))
# Calculate the centroid of each hexagon to add the label
# https://stackoverflow.com/questions/49343958/do-the-values-returned-by-rgeosgcentroid-and-sfst-centroid-differ
centers <- data.frame(
st_coordinates(st_centroid(USA_hex_shp$geometry)),
id=USA_hex_shp$iso3166_2)
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_label(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme(legend.position = "bottom")
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_label(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom")
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom")
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom") +
guides(color = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "30 Day Map Challenge",
subtitle = "Day 4: Hexagons",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom") +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = ")30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom") +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = "())30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom") +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = "(30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom") +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = "(30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom",
legend.title = element_blank()) +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = "(30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom",
legend.title = element_blank()) +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = "(30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign (2020)",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom",
legend.title = element_blank()) +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
USA_HRC_LGBT_housing %>%
ggplot() +
geom_sf(aes(fill = housing)) +
geom_text(data = centers, aes(x = X, y = Y, label = id)) +
labs(title = "Non-Discrimination in Housing",
subtitle = "(30 Day Map Challenge Day 4: Hexagons)",
caption = "Data Source: Human Rights Campaign (2020)",
x = "", y = "") +
theme_minimal() +
theme(legend.position = "bottom",
legend.title = element_blank()) +
guides(fill = guide_legend(nrow = 4, byrow = TRUE))
