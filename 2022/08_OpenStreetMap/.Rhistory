add_osm_feature(key = 'amenity', value = 'toilets') %>%
osmdata_sf ()
# load shape file(s)
#| message: false
#| warning: false
library("osmdata")
library("sf")
library("tidyverse")
knitr::opts_chunk$set(echo = TRUE)
# city of Merced bounds
lat_min <- 37.27
lat_max <- 37.38
long_min <- -120.52
long_max <- -120.42
#| message: false
#| warning: false
# load data
merced_osm_data_raw <- opq(bbox = getbb("Merced, CA")) %>%
add_osm_feature(key = 'amenity', value = 'toilets') %>%
osmdata_sf ()
# load shape file(s)
# make map
states_shp |>
ggplot() +
geom_sf() +
geom_sf(data = parks_shp) +
# https://ggplot2.tidyverse.org/reference/geom_density_2d.html
geom_density_2d_filled(aes(x = long, y = lat, fill = ..level..),
alpha = 0.5,
data = parks_df) +
# https://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3
scale_fill_brewer(palette = "Greens") +
labs(title = "2D Density Plot of US National Parks",
subtitle = "30 Day Map Challange, Day 4: Green",
caption = "Data Source: National Park Service\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
View(merced_osm_data_raw)
# load shape file(s)
merced_road_shp <- st_read("../data/Merced_County_Road_Centerlines/Road_Centerlines.shp")
# wrangle with data
merced_toilets_data_raw <- merced_osm_data_raw$osm_points
merced_toilets_df <- data.frame(
st_coordinates(st_centroid(merced_toilets_data_raw$geometry)),
id = merced_toilets_data_raw$name
)
View(merced_toilets_data_raw)
# wrangle with data
merced_toilets_data_raw <- merced_osm_data_raw$osm_points |>
filter(!is.na(amenity))
# wrangle with data
merced_toilets_data_raw <- merced_osm_data_raw$osm_points |>
filter(!is.na(amenity))
merced_toilets_df <- data.frame(
st_coordinates(st_centroid(merced_toilets_data_raw$geometry)),
id = merced_toilets_data_raw$amenity
)
View(merced_toilets_df)
View(merced_toilets_df)
# make map
merced_road_shp |>
ggplot() +
geom_sf() +
geom_point(aes(x = X, y = Y),
data = merced_toilets_df) +
labs(title = "2D Density Plot of US National Parks",
subtitle = "30 Day Map Challange, Day 4: Green",
caption = "Data Source: National Park Service\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
# make map
merced_road_shp |>
ggplot() +
geom_sf() +
geom_point(aes(x = X, y = Y),
data = merced_toilets_df) +
labs(title = "Hunting for a Toilet in Merced?",
subtitle = "30 Day Map Challange, Day 8: OpenStreetMap",
caption = "Data Source: OpenStreetMap\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
View(merced_toilets_df)
# make map
merced_road_shp |>
ggplot() +
geom_sf() +
geom_image(aes(x = X, y = Y, image = "toilet_icon.png"),
data = merced_toilets_df) +
labs(title = "Hunting for a Toilet in Merced?",
subtitle = "30 Day Map Challange, Day 8: OpenStreetMap",
caption = "Data Source: OpenStreetMap\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
library("ggimage")
# make map
merced_road_shp |>
ggplot() +
geom_sf() +
geom_image(aes(x = X, y = Y, image = "toilet_icon.png"),
data = merced_toilets_df) +
labs(title = "Hunting for a Toilet in Merced?",
subtitle = "30 Day Map Challange, Day 8: OpenStreetMap",
caption = "Data Source: OpenStreetMap\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
ggplot() +
geom_sf() +
geom_image(aes(x = X, y = Y, image = "toilet_icon.png"),
data = merced_toilets_df) +
labs(title = "Hunting for a Toilet in Merced?",
subtitle = "30 Day Map Challange, Day 8: OpenStreetMap",
caption = "Data Source: OpenStreetMap\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
# make map
main_plot <- merced_road_shp |>
ggplot() +
geom_sf() +
geom_image(aes(x = X, y = Y, image = "toilet_icon.png"),
data = merced_toilets_df) +
labs(title = "Hunting for a Toilet in Merced?",
subtitle = "30 Day Map Challange, Day 8: OpenStreetMap",
caption = "Data Source: OpenStreetMap\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
main_plot
setwd("~/GitHub/30DayMapChallenge/2022/08_OpenStreetMap")
#| message: false
#| warning: false
library("ggimage")
library("osmdata")
library("sf")
library("tidyverse")
knitr::opts_chunk$set(echo = TRUE)
# city of Merced bounds
lat_min <- 37.27
lat_max <- 37.38
long_min <- -120.52
long_max <- -120.42
#| message: false
#| warning: false
# load data (be careful of cached data)
merced_osm_data_raw <- opq(bbox = getbb("Merced, CA")) %>%
add_osm_feature(key = 'amenity', value = 'toilets') %>%
osmdata_sf ()
# load shape file(s)
merced_road_shp <- st_read("../data/Merced_County_Road_Centerlines/Road_Centerlines.shp")
# wrangle with data
merced_toilets_data_raw <- merced_osm_data_raw$osm_points |>
filter(!is.na(amenity))
merced_toilets_df <- data.frame(
st_coordinates(st_centroid(merced_toilets_data_raw$geometry)),
id = merced_toilets_data_raw$amenity
)
# make map
main_plot <- merced_road_shp |>
ggplot() +
geom_sf() +
geom_image(aes(x = X, y = Y, image = "toilet_icon.png"),
data = merced_toilets_df) +
labs(title = "Hunting for a Toilet in Merced?",
subtitle = "30 Day Map Challange, Day 8: OpenStreetMap",
caption = "Data Source: OpenStreetMap\nMap Created by Derek Sollberger",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
main_plot
#| message: false
#| warning: false
# load geoJSON file
lylat_JSON <- st_read("Lylat.geojson")
#| message: false
#| warning: false
library("sf")
library("tidyverse")
knitr::opts_chunk$set(echo = TRUE)
#| message: false
#| warning: false
# load geoJSON file
lylat_JSON <- st_read("Lylat.geojson")
View(lylat_JSON)
# make crude map
lylat_JSON |>
ggplot() +
geom_sf()
# make crude map
lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id))
# make map
lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id))
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
# make crude map
lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id))
lat_min <- 36
lat_max <- 46
long_min <- -125
long_max <- -105
# make map
lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id))
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
# make map
lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id)) +
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
# make map
foreground <- lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id)) +
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
xlim(long_min, long_max) +
ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
## add background
ggimage::ggbackground(foreground, "space_background.png")
# make map
foreground <- lylat_JSON |>
ggplot() +
geom_sf(aes(fill = id)) +
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
# xlim(long_min, long_max) +
# ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
## add background
ggimage::ggbackground(foreground, "space_background.png")
install.packages("ggpubr")
# make map
foreground <- lylat_JSON |>
ggplot() +
ggpubr::background_image("space_background.png") +
geom_sf(aes(fill = id)) +
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
# xlim(long_min, long_max) +
# ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
## add background
# ggimage::ggbackground(foreground, "space_background.png")
foreground
# make map
foreground <- lylat_JSON |>
ggplot() +
ggpubr::background_image(png::readPNG("space_background.png")) +
geom_sf(aes(fill = id)) +
labs(title = "",
subtitle = "",
caption = "",
x = "", y = "") +
# xlim(long_min, long_max) +
# ylim(lat_min, lat_max) +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
legend.title = element_blank(),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white"),
plot.title = element_text(color = "#2ca25f", face = "bold",
size = 48, hjust = 0.5),
plot.subtitle = element_text(color = "#2ca25f",
size = 36, hjust = 0.5),
plot.caption = element_text(color = "#2ca25f",
size = 24, hjust = 0.5))
## add background
# ggimage::ggbackground(foreground, "space_background.png")
foreground
